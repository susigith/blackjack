var p=(e,t,o)=>{if(!t.has(e))throw TypeError("Cannot "+o)};var u=(e,t,o)=>(p(e,t,"read from private field"),o?o.call(e):t.get(e)),m=(e,t,o)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,o)},f=(e,t,o,r)=>(p(e,t,"write to private field"),r?r.call(e,o):t.set(e,o),o);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function o(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(s){if(s.ep)return;s.ep=!0;const c=o(s);fetch(s.href,c)}})();const q=()=>{let e=1,t=0;do if(e=Number(prompt(`Â¿CuÃ¡ntos jugadores quieres en la mesa?  
 ðŸ’¡ Introduce un numero del 1 al 3`,1)),t++,t===3){e=1;break}while(Number.isNaN(e)||e<1||e>3);return e};var d,i;class w{constructor({cardType:t,cardValue:o}){m(this,d,void 0);m(this,i,void 0);f(this,d,t),f(this,i,o)}get cardType(){return u(this,d)}get cardValue(){return u(this,i)}}d=new WeakMap,i=new WeakMap;class h{constructor({id:t,name:o,score:r}){this.id=t,this.name=o,this.score=r}}const L=()=>{const e=document.querySelector(".game-table");e&&e.remove()},S=(e,t)=>{if(!e||!t)throw new Error("Parameters card and jugador are mandatory");const o=document.querySelector(`.${t}-cards-deck`);if(!o)throw new Error("jugador deck cannot be found");const r=document.createElement("img");r.classList.add("cards"),r.src=`../../cartas/${e}.png`,o.appendChild(r)},y=(e,t)=>{if(!e||!t)throw new Error("Parameters currentPlayer and deck are required");const o=document.querySelector(`.${e.id}-score`);let r=v(t);e.score=k(e,r),o.innerText=` - PuntuaciÃ³n ${e.score}`,S(r.cardType,e.id)},T=(e,t)=>{if(!e||!t)throw new Error("Parameters arrayOfPlayers and element are required");const o=document.createElement("div");o.classList.add("game-table");for(let r=0;r<e.length;r++){const s=document.createElement("div"),c=document.createElement("div"),a=document.createElement("h2"),n=document.createElement("h2");s.classList.add(`${e[r].id}`),c.classList.add(`${e[r].id}-cards-deck`),n.classList.add(`${e[r].id}-score`),a.innerText=e[r].name,n.innerText=` - PuntuaciÃ³n ${e[r].score}`,s.append(a,n,c),o.appendChild(s)}t.appendChild(o)},g=(e,t,o,r)=>{const s=t.length===0?0:t.reduce((c,a)=>c.score>a.score?c:a).score;for(;e.score<=s;)y(e,o);t.push(e),e=r.shift()},$=()=>{const e=["H","D","C","S"],t={A:11,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,J:10,Q:10,K:10};return e.flatMap(r=>{let s=[];for(const c in t)s.push(new w({cardType:c+r,cardValue:t[c]}));return s})},C=()=>{const e=q();let t=[];for(let o=0;o<e;o++)t.push(new h({id:`player${o+1}`,name:`Jugador ${o+1}`,score:0}));return t.push(new h({id:"computer",name:"Computadora",score:0})),t},b=e=>{const t=e.reduce((o,r)=>r.score>o.score&&r.score<=21?r:o);setTimeout(()=>{alert(`${t.name} Gana ðŸ¥³`)},1e3)},E=(e,t,o)=>{e=C(),t=$(),o=[];for(let r=t.length-1;r>0;r--){let s=Math.floor(Math.random()*(r+1));[t[r],t[s]]=[t[s],t[r]]}return{deck:t,arrayOfPlayers:e,scoreBoard:o}},v=(e=[])=>{if(e.length===0)throw new Error("No quedan cartas en el mazo");return e.shift()},k=(e,t)=>{let{score:o}=e;return o=Number(t.cardValue)+Number(o),o},N=e=>{let t,o,r,s=[];document.querySelector(".new-game").addEventListener("click",()=>{L(),setTimeout(()=>{a.disabled=!1,n.disabled=!1;let l=E(o,t,s);t=l.deck,o=l.arrayOfPlayers,s=l.scoreBoard,T(o,e),r=o.shift(),document.querySelector(`.${r.id} h2`).classList.add("flicker")},1)});const a=document.querySelector(".request-card");a.disabled=!0,a.addEventListener("click",()=>{y(r,t),r.score===21&&setTimeout(()=>{alert(`21, ${r.name} Gana ðŸ¥³`)},1),r.score>21&&(r=o.shift(),document.querySelector(".flicker").classList.remove("flicker"),document.querySelector(`.${r.id} h2`).classList.add("flicker"),setTimeout(()=>{alert(`Â¡Oh no! Te has pasado ðŸ«£ 
 Turno de ${r.name}`)},1),r.name==="Computadora"&&(g(r,s,t,o),b(s),a.disabled=!0,n.disabled=!0))});const n=document.querySelector(".stop-game");n.disabled=!0,n.addEventListener("click",()=>{s.push(r),r=o.shift(),document.querySelector(".flicker").classList.remove("flicker"),document.querySelector(`.${r.id} h2`).classList.add("flicker"),r.name==="Computadora"&&(g(r,s,t,o),b(s),a.disabled=!0,n.disabled=!0)})},G=document.querySelector("#app");N(G);
